create database libraryManagementDB;

use libraryManagementDB;

show Tables;

CREATE TABLE User (
  UserID INT PRIMARY KEY AUTO_INCREMENT,
  Name VARCHAR(255) NOT NULL,
  Email VARCHAR(255) NOT NULL UNIQUE,
  MembershipDate DATE NOT NULL
);

CREATE TABLE Book (
  BookID INT PRIMARY KEY AUTO_INCREMENT,
  Title VARCHAR(255) NOT NULL,
  ISBN VARCHAR(20) NOT NULL UNIQUE,
  PublishedDate DATE NOT NULL,
  Genre VARCHAR(50) NOT NULL
);

CREATE TABLE BookDetails (
  DetailsID INT PRIMARY KEY AUTO_INCREMENT,
  BookID INT UNIQUE,
  NumberOfPages INT NOT NULL,
  Publisher VARCHAR(255) NOT NULL,
  Language VARCHAR(50) NOT NULL,
  FOREIGN KEY (BookID) REFERENCES Book(BookID) ON DELETE CASCADE
);

CREATE TABLE BorrowedBooks (
  UserID INT,
  BookID INT,
  BorrowDate DATE NOT NULL,
  ReturnDate DATE,
  PRIMARY KEY (UserID, BookID),
  FOREIGN KEY (UserID) REFERENCES User(UserID) ON DELETE CASCADE,
  FOREIGN KEY (BookID) REFERENCES Book(BookID) ON DELETE CASCADE
);