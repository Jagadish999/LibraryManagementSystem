create database libraryManagementDB;

use libraryManagementDB;

CREATE TABLE Users (
  UserID INT PRIMARY KEY AUTO_INCREMENT,
  Name VARCHAR(255) NOT NULL,
  Email VARCHAR(255) NOT NULL UNIQUE,
  MembershipDate DATE NOT NULL
);

CREATE TABLE Books (
  BookID INT PRIMARY KEY AUTO_INCREMENT,
  Title VARCHAR(255) NOT NULL,
  ISBN VARCHAR(255) NOT NULL UNIQUE,
  PublishedDate DATE NOT NULL,
  Genre VARCHAR(255) NOT NULL
);

CREATE TABLE BookDetails (
  DetailsID INT PRIMARY KEY AUTO_INCREMENT,
  BookID INT UNIQUE,
  NumberOfPages INT NOT NULL,
  Publisher VARCHAR(255) NOT NULL,
  Language VARCHAR(255) NOT NULL,
  FOREIGN KEY (BookID) REFERENCES Books(BookID) ON DELETE CASCADE
);

CREATE TABLE BorrowedBooks (
  BorrowedBooksID INT PRIMARY KEY AUTO_INCREMENT,
  UserID INT,
  BookID INT UNIQUE,
  BorrowDate DATE NOT NULL,
  ReturnDate DATE,
  FOREIGN KEY (UserID) REFERENCES Users(UserID) ON DELETE CASCADE,
  FOREIGN KEY (BookID) REFERENCES Books(BookID) ON DELETE CASCADE
);

